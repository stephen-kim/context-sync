<!DOCTYPE html><html lang="en" class="dark"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/284ccbea44cc8397.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-8fa15bc44c4a2b28.js"/><script src="/_next/static/chunks/5b8f0dd8-0b7e1dd47e2a464c.js" async=""></script><script src="/_next/static/chunks/749-a73fe5f6d6c8d6fc.js" async=""></script><script src="/_next/static/chunks/main-app-76eea0740ba2dd81.js" async=""></script><script src="/_next/static/chunks/411-74b2a502b45b9a7c.js" async=""></script><script src="/_next/static/chunks/app/docs/%5B...slug%5D/page-9841484d05ce8edd.js" async=""></script><title>Notion Integration | Claustrum Docs</title><meta name="description" content="Documentation page: Notion Integration"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><header class="border-b border-border/70 bg-background/70 backdrop-blur"><div class="container-docs flex items-center justify-between gap-3 py-4"><div><a class="text-lg font-semibold text-foreground no-underline" href="/">Claustrum Docs</a><p class="subtitle">GitHub Pages documentation for Claustrum</p></div><div class="flex items-center gap-2"><a class="button-link no-underline" href="/docs/home/">English</a><a class="button-link no-underline" href="/docs/ko/home/">한국어</a></div></div></header><main class="container-docs grid gap-6 lg:grid-cols-[280px_minmax(0,1fr)]"><aside class="panel hidden h-fit lg:block"><div class="panel-body space-y-4 text-sm"><div class="space-y-2"><h2 class="text-xs font-semibold uppercase tracking-wide text-muted-foreground">English</h2><ul class="space-y-1"><li><a class="no-underline" href="/docs/home/">Home</a></li><li><a class="no-underline" href="/docs/recent-updates/">recent-updates</a></li><li><a class="no-underline" href="/docs/installation/">Installation</a></li><li><a class="no-underline" href="/docs/environment-variables/">Environment-Variables</a></li><li><a class="no-underline" href="/docs/dependency-management/">dependency-management</a></li><li><a class="no-underline" href="/docs/ci/">ci</a></li><li><a class="no-underline" href="/docs/release-gate/">release-gate</a></li><li><a class="no-underline" href="/docs/operations/">Operations</a></li><li><a class="no-underline" href="/docs/security-and-mcp-io/">Security-and-MCP-IO</a></li><li><a class="no-underline" href="/docs/onboarding/">Onboarding</a></li><li><a class="no-underline" href="/docs/bootstrap-admin/">Bootstrap-Admin</a></li><li><a class="no-underline" href="/docs/auth-and-roles/">Auth-and-Roles</a></li><li><a class="no-underline" href="/docs/oidc-sso/">OIDC-SSO</a></li><li><a class="no-underline" href="/docs/group-mapping/">Group-Mapping</a></li></ul></div><div class="space-y-2"><h2 class="text-xs font-semibold uppercase tracking-wide text-muted-foreground">한국어</h2><ul class="space-y-1"><li><a class="no-underline" href="/docs/dependency-management/">dependency-management</a></li><li><a class="no-underline" href="/docs/ci/">ci</a></li><li><a class="no-underline" href="/docs/persona/">persona</a></li><li><a class="no-underline" href="/docs/context-bundle-eval/">context-bundle-eval</a></li><li><a class="no-underline" href="/docs/active-work-stale/">active-work-stale</a></li><li><a class="no-underline" href="/docs/active-work-timeline/">active-work-timeline</a></li><li><a class="no-underline" href="/docs/context-debug/">context-debug</a></li></ul></div></div></aside><section class="panel"><div class="panel-body space-y-6"><div class="flex flex-wrap items-center justify-between gap-3"><div><h1 class="title">Notion Integration</h1><p class="subtitle">English document<!-- --> · Source: <!-- -->Notion-Integration.md</p></div><div class="flex gap-2"><a class="button-link no-underline" href="/">Docs Home</a></div></div><article class="prose-docs"><h1>Notion Integration</h1>
<h2>Goal</h2>
<p>Use Notion as external context for AI workflows:</p>
<ul>
<li>read/search docs during coding sessions</li>
<li>optional write-back on merge (recommended over local git hooks)</li>
</ul>
<h2>What You Need</h2>
<ul>
<li>Notion integration token<!-- -->
<ul>
<li>Create an internal integration in Notion developers</li>
</ul>
</li>
<li>Target pages/databases shared with that integration</li>
<li><code>workspace_key</code> in memory-core (example: <code>personal</code>)</li>
</ul>
<h2>Environment Variables (Fallback)</h2>
<ul>
<li><code>MEMORY_CORE_NOTION_TOKEN</code></li>
<li><code>MEMORY_CORE_NOTION_DEFAULT_PARENT_PAGE_ID</code></li>
<li><code>MEMORY_CORE_NOTION_WRITE_ENABLED</code></li>
</ul>
<h2>Step-by-Step Setup</h2>
<ol>
<li>Create and authorize Notion integration</li>
</ol>
<ul>
<li>Create internal integration and copy token (<code>secret_...</code>).</li>
<li>Share required pages/databases with that integration.</li>
</ul>
<ol start="2">
<li>Save config in Admin UI</li>
</ol>
<ul>
<li>Open <code>admin-ui</code> -&gt; Integrations -&gt; Notion.</li>
<li>Save:<!-- -->
<ul>
<li><code>enabled=true</code></li>
<li><code>token</code></li>
<li><code>default_parent_page_id</code> (optional)</li>
<li><code>write_enabled</code> (enable write API)</li>
<li>optional hook flags: <code>write_on_commit</code>, <code>write_on_merge</code></li>
</ul>
</li>
</ul>
<ol start="3">
<li>Save config via API (optional)</li>
</ol>
<pre><code class="language-bash">curl -X PUT &quot;$MEMORY_CORE_URL/v1/integrations&quot; \
  -H &quot;Authorization: Bearer $MEMORY_CORE_API_KEY&quot; \
  -H &quot;Content-Type: application/json&quot; \
  -d &#x27;{
    &quot;workspace_key&quot;: &quot;personal&quot;,
    &quot;provider&quot;: &quot;notion&quot;,
    &quot;enabled&quot;: true,
    &quot;reason&quot;: &quot;enable notion context and merge write-back&quot;,
    &quot;config&quot;: {
      &quot;token&quot;: &quot;secret_xxx&quot;,
      &quot;default_parent_page_id&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,
      &quot;write_enabled&quot;: true,
      &quot;write_on_merge&quot;: true
    }
  }&#x27;
</code></pre>
<ol start="4">
<li>Validate with API</li>
</ol>
<pre><code class="language-bash">curl -G &quot;$MEMORY_CORE_URL/v1/notion/search&quot; \
  -H &quot;Authorization: Bearer $MEMORY_CORE_API_KEY&quot; \
  --data-urlencode &quot;workspace_key=personal&quot; \
  --data-urlencode &quot;q=architecture&quot; \
  --data-urlencode &quot;limit=5&quot;
</code></pre>
<pre><code class="language-bash">curl -G &quot;$MEMORY_CORE_URL/v1/notion/read&quot; \
  -H &quot;Authorization: Bearer $MEMORY_CORE_API_KEY&quot; \
  --data-urlencode &quot;workspace_key=personal&quot; \
  --data-urlencode &quot;page_id=&lt;notion-page-id-or-url&gt;&quot; \
  --data-urlencode &quot;max_chars=2000&quot;
</code></pre>
<ol start="5">
<li>Validate from MCP tools</li>
</ol>
<ul>
<li><code>notion_search({ q, limit? })</code></li>
<li><code>notion_read({ page_id, max_chars? })</code></li>
<li><code>notion_context({ q?, page_id?, limit?, max_chars? })</code></li>
</ul>
<h2>Config Keys</h2>
<ul>
<li><code>token</code></li>
<li><code>default_parent_page_id</code></li>
<li><code>write_enabled</code></li>
<li><code>write_on_commit</code></li>
<li><code>write_on_merge</code></li>
</ul>
<h2>API Endpoints</h2>
<p>Read/search:</p>
<ul>
<li><code>GET /v1/notion/search?workspace_key=&lt;ws&gt;&amp;q=&lt;query&gt;&amp;limit=10</code></li>
<li><code>GET /v1/notion/read?workspace_key=&lt;ws&gt;&amp;page_id=&lt;id-or-url&gt;&amp;max_chars=4000</code></li>
</ul>
<p>Write (admin only):</p>
<ul>
<li><code>POST /v1/notion/write</code></li>
</ul>
<p>Example:</p>
<pre><code class="language-json">{
  &quot;workspace_key&quot;: &quot;personal&quot;,
  &quot;title&quot;: &quot;Merge Summary&quot;,
  &quot;content&quot;: &quot;What changed and why...&quot;,
  &quot;page_id&quot;: &quot;optional-existing-page-id&quot;,
  &quot;parent_page_id&quot;: &quot;optional-parent-page-id&quot;
}
</code></pre>
<h2>Permissions and Audit</h2>
<ul>
<li>Notion read/search: workspace member access</li>
<li>Notion write: workspace admin + <code>MEMORY_CORE_NOTION_WRITE_ENABLED=true</code></li>
<li>Audit actions:<!-- -->
<ul>
<li><code>notion.search</code></li>
<li><code>notion.read</code></li>
<li><code>notion.write</code></li>
</ul>
</li>
</ul>
<h2>Merge-Based Write (Recommended)</h2>
<p>Prefer merge-triggered docs sync in CI (e.g., GitHub Actions) over local git hooks.</p>
<p>Why:</p>
<ul>
<li>consistent runtime + secrets</li>
<li>avoids local env drift</li>
<li>no developer-side hook failures</li>
</ul>
<p>Suggested flow:</p>
<ol>
<li>Trigger on <code>push</code> to <code>main</code></li>
<li>Build commit/PR summary</li>
<li>Call <code>/v1/notion/write</code> with admin API key</li>
<li>Record result in workflow logs</li>
</ol>
<p>Reference workflow:</p>
<ul>
<li><code>.github/workflows/notion-merge-sync.yml</code></li>
</ul>
<h2>Env vs Admin UI Priority</h2>
<ul>
<li>Default: workspace config in Admin UI wins over env fallback.</li>
<li>Lock option:<!-- -->
<ul>
<li><code>MEMORY_CORE_INTEGRATION_LOCKED_PROVIDERS=notion</code></li>
<li>When locked, Admin UI updates are blocked and env-only is enforced.</li>
</ul>
</li>
</ul>
<h2>Troubleshooting</h2>
<ul>
<li>Search/read returns configuration error<!-- -->
<ul>
<li>Check token, page sharing, and <code>enabled=true</code>.</li>
</ul>
</li>
<li>Write fails<!-- -->
<ul>
<li>Check workspace admin permission and <code>write_enabled=true</code>.</li>
</ul>
</li>
<li>Merge hook write does not fire<!-- -->
<ul>
<li>Check <code>write_on_merge=true</code> and hook/event forwarding settings.</li>
</ul>
</li>
</ul></article><footer class="border-t border-border pt-4"><p class="subtitle mb-2">More <!-- -->English<!-- --> pages</p><div class="flex flex-wrap gap-2"><a class="button-link no-underline" href="/docs/active-work-stale/">Active Work Stale and Auto-close</a><a class="button-link no-underline" href="/docs/active-work-timeline/">Active Work Timeline</a><a class="button-link no-underline" href="/docs/admin-extraction-settings/">Admin Extraction Settings</a><a class="button-link no-underline" href="/docs/api-keys-and-security/">API Keys and Security</a><a class="button-link no-underline" href="/docs/atlassian-integration/">Atlassian Integration (Jira + Confluence)</a><a class="button-link no-underline" href="/docs/audit-access-timeline/">Audit Access Timeline</a><a class="button-link no-underline" href="/docs/audit-model/">Audit Model</a><a class="button-link no-underline" href="/docs/audit-retention/">Audit Retention</a><a class="button-link no-underline" href="/docs/auth-and-roles/">Auth and Roles</a><a class="button-link no-underline" href="/docs/authorization-model/">Authorization Model Overview</a><a class="button-link no-underline" href="/docs/bootstrap-admin/">Bootstrap Admin Setup</a><a class="button-link no-underline" href="/docs/bootstrap-context/">Bootstrap Context</a></div></footer></div></section></main><script src="/_next/static/chunks/webpack-8fa15bc44c4a2b28.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/284ccbea44cc8397.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"2:I[6608,[],\"\"]\n4:I[5411,[\"411\",\"static/chunks/411-74b2a502b45b9a7c.js\",\"687\",\"static/chunks/app/docs/%5B...slug%5D/page-9841484d05ce8edd.js\"],\"\"]\n5:I[2728,[],\"\"]\n7:I[9836,[],\"\"]\n9:I[8907,[],\"\"]\n6:[\"slug\",\"notion-integration\",\"c\"]\na:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L2\",null,{\"buildId\":\"nfX1tAN8bxYO85unX-2s-\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"docs\",\"notion-integration\",\"\"],\"initialTree\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"notion-integration\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"notion-integration\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"notion-integration\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L3\",[\"$\",\"main\",null,{\"className\":\"container-docs grid gap-6 lg:grid-cols-[280px_minmax(0,1fr)]\",\"children\":[[\"$\",\"aside\",null,{\"className\":\"panel hidden h-fit lg:block\",\"children\":[\"$\",\"div\",null,{\"className\":\"panel-body space-y-4 text-sm\",\"children\":[[\"$\",\"div\",\"English\",{\"className\":\"space-y-2\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs font-semibold uppercase tracking-wide text-muted-foreground\",\"children\":\"English\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1\",\"children\":[[\"$\",\"li\",\"English:/docs/home\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/home\",\"className\":\"no-underline\",\"children\":\"Home\"}]}],[\"$\",\"li\",\"English:/docs/recent-updates\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/recent-updates\",\"className\":\"no-underline\",\"children\":\"recent-updates\"}]}],[\"$\",\"li\",\"English:/docs/installation\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/installation\",\"className\":\"no-underline\",\"children\":\"Installation\"}]}],[\"$\",\"li\",\"English:/docs/environment-variables\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/environment-variables\",\"className\":\"no-underline\",\"children\":\"Environment-Variables\"}]}],[\"$\",\"li\",\"English:/docs/dependency-management\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/dependency-management\",\"className\":\"no-underline\",\"children\":\"dependency-management\"}]}],[\"$\",\"li\",\"English:/docs/ci\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/ci\",\"className\":\"no-underline\",\"children\":\"ci\"}]}],[\"$\",\"li\",\"English:/docs/release-gate\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/release-gate\",\"className\":\"no-underline\",\"children\":\"release-gate\"}]}],[\"$\",\"li\",\"English:/docs/operations\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/operations\",\"className\":\"no-underline\",\"children\":\"Operations\"}]}],[\"$\",\"li\",\"English:/docs/security-and-mcp-io\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/security-and-mcp-io\",\"className\":\"no-underline\",\"children\":\"Security-and-MCP-IO\"}]}],[\"$\",\"li\",\"English:/docs/onboarding\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/onboarding\",\"className\":\"no-underline\",\"children\":\"Onboarding\"}]}],[\"$\",\"li\",\"English:/docs/bootstrap-admin\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/bootstrap-admin\",\"className\":\"no-underline\",\"children\":\"Bootstrap-Admin\"}]}],[\"$\",\"li\",\"English:/docs/auth-and-roles\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/auth-and-roles\",\"className\":\"no-underline\",\"children\":\"Auth-and-Roles\"}]}],[\"$\",\"li\",\"English:/docs/oidc-sso\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/oidc-sso\",\"className\":\"no-underline\",\"children\":\"OIDC-SSO\"}]}],[\"$\",\"li\",\"English:/docs/group-mapping\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/group-mapping\",\"className\":\"no-underline\",\"children\":\"Group-Mapping\"}]}]]}]]}],[\"$\",\"div\",\"한국어\",{\"className\":\"space-y-2\",\"children\":[[\"$\",\"h2\",null,{\"className\":\"text-xs font-semibold uppercase tracking-wide text-muted-foreground\",\"children\":\"한국어\"}],[\"$\",\"ul\",null,{\"className\":\"space-y-1\",\"children\":[[\"$\",\"li\",\"한국어:/docs/dependency-management\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/dependency-management\",\"className\":\"no-underline\",\"children\":\"dependency-management\"}]}],[\"$\",\"li\",\"한국어:/docs/ci\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/ci\",\"className\":\"no-underline\",\"children\":\"ci\"}]}],[\"$\",\"li\",\"한국어:/docs/persona\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/persona\",\"className\":\"no-underline\",\"children\":\"persona\"}]}],[\"$\",\"li\",\"한국어:/docs/context-bundle-eval\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/context-bundle-eval\",\"className\":\"no-underline\",\"children\":\"context-bundle-eval\"}]}],[\"$\",\"li\",\"한국어:/docs/active-work-stale\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/active-work-stale\",\"className\":\"no-underline\",\"children\":\"active-work-stale\"}]}],[\"$\",\"li\",\"한국어:/docs/active-work-timeline\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/active-work-timeline\",\"className\":\"no-underline\",\"children\":\"active-work-timeline\"}]}],[\"$\",\"li\",\"한국어:/docs/context-debug\",{\"children\":[\"$\",\"$L4\",null,{\"href\":\"/docs/context-debug\",\"className\":\"no-underline\",\"children\":\"context-debug\"}]}]]}]]}]]}]}],[\"$\",\"section\",null,{\"className\":\"panel\",\"children\":[\"$\",\"div\",null,{\"className\":\"panel-body space-y-6\",\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-wrap items-center justify-between gap-3\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"h1\",null,{\"className\":\"title\",\"children\":\"Notion Integration\"}],[\"$\",\"p\",null,{\"className\":\"subtitle\",\"children\":[\"English document\",\" · Source: \",\"Notion-Integration.md\"]}]]}],[\"$\",\"div\",null,{\"className\":\"flex gap-2\",\"children\":[\"$\",\"$L4\",null,{\"className\":\"button-link no-underline\",\"href\":\"/\",\"children\":\"Docs Home\"}]}]]}],[\"$\",\"article\",null,{\"className\":\"prose-docs\",\"children\":[[\"$\",\"h1\",\"h1-0\",{\"children\":\"Notion Integration\"}],\"\\n\",[\"$\",\"h2\",\"h2-0\",{\"children\":\"Goal\"}],\"\\n\",[\"$\",\"p\",\"p-0\",{\"children\":\"Use Notion as external context for AI workflows:\"}],\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"read/search docs during coding sessions\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"optional write-back on merge (recommended over local git hooks)\"}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-1\",{\"children\":\"What You Need\"}],\"\\n\",[\"$\",\"ul\",\"ul-1\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Notion integration token\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Create an internal integration in Notion developers\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Target pages/databases shared with that integration\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"workspace_key\"}],\" in memory-core (example: \",[\"$\",\"code\",\"code-1\",{\"children\":\"personal\"}],\")\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-2\",{\"children\":\"Environment Variables (Fallback)\"}],\"\\n\",[\"$\",\"ul\",\"ul-2\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"MEMORY_CORE_NOTION_TOKEN\"}]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"MEMORY_CORE_NOTION_DEFAULT_PARENT_PAGE_ID\"}]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"MEMORY_CORE_NOTION_WRITE_ENABLED\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-3\",{\"children\":\"Step-by-Step Setup\"}],\"\\n\",[\"$\",\"ol\",\"ol-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Create and authorize Notion integration\"}],\"\\n\"]}],\"\\n\",[\"$\",\"ul\",\"ul-3\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Create internal integration and copy token (\",[\"$\",\"code\",\"code-0\",{\"children\":\"secret_...\"}],\").\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Share required pages/databases with that integration.\"}],\"\\n\"]}],\"\\n\",[\"$\",\"ol\",\"ol-1\",{\"start\":2,\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Save config in Admin UI\"}],\"\\n\"]}],\"\\n\",[\"$\",\"ul\",\"ul-4\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Open \",[\"$\",\"code\",\"code-0\",{\"children\":\"admin-ui\"}],\" -\u003e Integrations -\u003e Notion.\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Save:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"enabled=true\"}]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"token\"}]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"default_parent_page_id\"}],\" (optional)\"]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[[\"$\",\"code\",\"code-0\",{\"children\":\"write_enabled\"}],\" (enable write API)\"]}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":[\"optional hook flags: \",[\"$\",\"code\",\"code-0\",{\"children\":\"write_on_commit\"}],\", \",[\"$\",\"code\",\"code-1\",{\"children\":\"write_on_merge\"}]]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"ol\",\"ol-2\",{\"start\":3,\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Save config via API (optional)\"}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",\"pre-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-bash\",\"children\":\"curl -X PUT \\\"$MEMORY_CORE_URL/v1/integrations\\\" \\\\\\n  -H \\\"Authorization: Bearer $MEMORY_CORE_API_KEY\\\" \\\\\\n  -H \\\"Content-Type: application/json\\\" \\\\\\n  -d '{\\n    \\\"workspace_key\\\": \\\"personal\\\",\\n    \\\"provider\\\": \\\"notion\\\",\\n    \\\"enabled\\\": true,\\n    \\\"reason\\\": \\\"enable notion context and merge write-back\\\",\\n    \\\"config\\\": {\\n      \\\"token\\\": \\\"secret_xxx\\\",\\n      \\\"default_parent_page_id\\\": \\\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\",\\n      \\\"write_enabled\\\": true,\\n      \\\"write_on_merge\\\": true\\n    }\\n  }'\\n\"}]}],\"\\n\",[\"$\",\"ol\",\"ol-3\",{\"start\":4,\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Validate with API\"}],\"\\n\"]}],\"\\n\",[\"$\",\"pre\",\"pre-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-bash\",\"children\":\"curl -G \\\"$MEMORY_CORE_URL/v1/notion/search\\\" \\\\\\n  -H \\\"Authorization: Bearer $MEMORY_CORE_API_KEY\\\" \\\\\\n  --data-urlencode \\\"workspace_key=personal\\\" \\\\\\n  --data-urlencode \\\"q=architecture\\\" \\\\\\n  --data-urlencode \\\"limit=5\\\"\\n\"}]}],\"\\n\",[\"$\",\"pre\",\"pre-2\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-bash\",\"children\":\"curl -G \\\"$MEMORY_CORE_URL/v1/notion/read\\\" \\\\\\n  -H \\\"Authorization: Bearer $MEMORY_CORE_API_KEY\\\" \\\\\\n  --data-urlencode \\\"workspace_key=personal\\\" \\\\\\n  --data-urlencode \\\"page_id=\u003cnotion-page-id-or-url\u003e\\\" \\\\\\n  --data-urlencode \\\"max_chars=2000\\\"\\n\"}]}],\"\\n\",[\"$\",\"ol\",\"ol-4\",{\"start\":5,\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Validate from MCP tools\"}],\"\\n\"]}],\"\\n\",[\"$\",\"ul\",\"ul-5\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"notion_search({ q, limit? })\"}]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"notion_read({ page_id, max_chars? })\"}]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"notion_context({ q?, page_id?, limit?, max_chars? })\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-4\",{\"children\":\"Config Keys\"}],\"\\n\",[\"$\",\"ul\",\"ul-6\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"token\"}]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"default_parent_page_id\"}]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"write_enabled\"}]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"write_on_commit\"}]}],\"\\n\",[\"$\",\"li\",\"li-4\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"write_on_merge\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-5\",{\"children\":\"API Endpoints\"}],\"\\n\",[\"$\",\"p\",\"p-1\",{\"children\":\"Read/search:\"}],\"\\n\",[\"$\",\"ul\",\"ul-7\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /v1/notion/search?workspace_key=\u003cws\u003e\u0026q=\u003cquery\u003e\u0026limit=10\"}]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"GET /v1/notion/read?workspace_key=\u003cws\u003e\u0026page_id=\u003cid-or-url\u003e\u0026max_chars=4000\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-2\",{\"children\":\"Write (admin only):\"}],\"\\n\",[\"$\",\"ul\",\"ul-8\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"POST /v1/notion/write\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-3\",{\"children\":\"Example:\"}],\"\\n\",[\"$\",\"pre\",\"pre-3\",{\"children\":[\"$\",\"code\",\"code-0\",{\"className\":\"language-json\",\"children\":\"{\\n  \\\"workspace_key\\\": \\\"personal\\\",\\n  \\\"title\\\": \\\"Merge Summary\\\",\\n  \\\"content\\\": \\\"What changed and why...\\\",\\n  \\\"page_id\\\": \\\"optional-existing-page-id\\\",\\n  \\\"parent_page_id\\\": \\\"optional-parent-page-id\\\"\\n}\\n\"}]}],\"\\n\",[\"$\",\"h2\",\"h2-6\",{\"children\":\"Permissions and Audit\"}],\"\\n\",[\"$\",\"ul\",\"ul-9\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Notion read/search: workspace member access\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Notion write: workspace admin + \",[\"$\",\"code\",\"code-0\",{\"children\":\"MEMORY_CORE_NOTION_WRITE_ENABLED=true\"}]]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"Audit actions:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"notion.search\"}]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"notion.read\"}]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"notion.write\"}]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-7\",{\"children\":\"Merge-Based Write (Recommended)\"}],\"\\n\",[\"$\",\"p\",\"p-4\",{\"children\":\"Prefer merge-triggered docs sync in CI (e.g., GitHub Actions) over local git hooks.\"}],\"\\n\",[\"$\",\"p\",\"p-5\",{\"children\":\"Why:\"}],\"\\n\",[\"$\",\"ul\",\"ul-10\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"consistent runtime + secrets\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"avoids local env drift\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":\"no developer-side hook failures\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-6\",{\"children\":\"Suggested flow:\"}],\"\\n\",[\"$\",\"ol\",\"ol-5\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Trigger on \",[\"$\",\"code\",\"code-0\",{\"children\":\"push\"}],\" to \",[\"$\",\"code\",\"code-1\",{\"children\":\"main\"}]]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"Build commit/PR summary\"}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"Call \",[\"$\",\"code\",\"code-0\",{\"children\":\"/v1/notion/write\"}],\" with admin API key\"]}],\"\\n\",[\"$\",\"li\",\"li-3\",{\"children\":\"Record result in workflow logs\"}],\"\\n\"]}],\"\\n\",[\"$\",\"p\",\"p-7\",{\"children\":\"Reference workflow:\"}],\"\\n\",[\"$\",\"ul\",\"ul-11\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\".github/workflows/notion-merge-sync.yml\"}]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-8\",{\"children\":\"Env vs Admin UI Priority\"}],\"\\n\",[\"$\",\"ul\",\"ul-12\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":\"Default: workspace config in Admin UI wins over env fallback.\"}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Lock option:\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"$\",\"code\",\"code-0\",{\"children\":\"MEMORY_CORE_INTEGRATION_LOCKED_PROVIDERS=notion\"}]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":\"When locked, Admin UI updates are blocked and env-only is enforced.\"}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"h2\",\"h2-9\",{\"children\":\"Troubleshooting\"}],\"\\n\",[\"$\",\"ul\",\"ul-13\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Search/read returns configuration error\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Check token, page sharing, and \",[\"$\",\"code\",\"code-0\",{\"children\":\"enabled=true\"}],\".\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-1\",{\"children\":[\"Write fails\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Check workspace admin permission and \",[\"$\",\"code\",\"code-0\",{\"children\":\"write_enabled=true\"}],\".\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\",[\"$\",\"li\",\"li-2\",{\"children\":[\"Merge hook write does not fire\",\"\\n\",[\"$\",\"ul\",\"ul-0\",{\"children\":[\"\\n\",[\"$\",\"li\",\"li-0\",{\"children\":[\"Check \",[\"$\",\"code\",\"code-0\",{\"children\":\"write_on_merge=true\"}],\" and hook/event forwarding settings.\"]}],\"\\n\"]}],\"\\n\"]}],\"\\n\"]}]]}],[\"$\",\"footer\",null,{\"className\":\"border-t border-border pt-4\",\"children\":[[\"$\",\"p\",null,{\"className\":\"subtitle mb-2\",\"children\":[\"More \",\"English\",\" pages\"]}],[\"$\",\"div\",null,{\"className\":\"flex flex-wrap gap-2\",\"children\":[[\"$\",\"$L4\",\"en:active-work-stale\",{\"href\":\"/docs/active-work-stale\",\"className\":\"button-link no-underline\",\"children\":\"Active Work Stale and Auto-close\"}],[\"$\",\"$L4\",\"en:active-work-timeline\",{\"href\":\"/docs/active-work-timeline\",\"className\":\"button-link no-underline\",\"children\":\"Active Work Timeline\"}],[\"$\",\"$L4\",\"en:admin-extraction-settings\",{\"href\":\"/docs/admin-extraction-settings\",\"className\":\"button-link no-underline\",\"children\":\"Admin Extraction Settings\"}],[\"$\",\"$L4\",\"en:api-keys-and-security\",{\"href\":\"/docs/api-keys-and-security\",\"className\":\"button-link no-underline\",\"children\":\"API Keys and Security\"}],[\"$\",\"$L4\",\"en:atlassian-integration\",{\"href\":\"/docs/atlassian-integration\",\"className\":\"button-link no-underline\",\"children\":\"Atlassian Integration (Jira + Confluence)\"}],[\"$\",\"$L4\",\"en:audit-access-timeline\",{\"href\":\"/docs/audit-access-timeline\",\"className\":\"button-link no-underline\",\"children\":\"Audit Access Timeline\"}],[\"$\",\"$L4\",\"en:audit-model\",{\"href\":\"/docs/audit-model\",\"className\":\"button-link no-underline\",\"children\":\"Audit Model\"}],[\"$\",\"$L4\",\"en:audit-retention\",{\"href\":\"/docs/audit-retention\",\"className\":\"button-link no-underline\",\"children\":\"Audit Retention\"}],[\"$\",\"$L4\",\"en:auth-and-roles\",{\"href\":\"/docs/auth-and-roles\",\"className\":\"button-link no-underline\",\"children\":\"Auth and Roles\"}],[\"$\",\"$L4\",\"en:authorization-model\",{\"href\":\"/docs/authorization-model\",\"className\":\"button-link no-underline\",\"children\":\"Authorization Model Overview\"}],[\"$\",\"$L4\",\"en:bootstrap-admin\",{\"href\":\"/docs/bootstrap-admin\",\"className\":\"button-link no-underline\",\"children\":\"Bootstrap Admin Setup\"}],[\"$\",\"$L4\",\"en:bootstrap-context\",{\"href\":\"/docs/bootstrap-context\",\"className\":\"button-link no-underline\",\"children\":\"Bootstrap Context\"}]]}]]}]]}]}]]}],null],null],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\",\"$6\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[null,[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/284ccbea44cc8397.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"dark\",\"children\":[\"$\",\"body\",null,{\"children\":[[\"$\",\"header\",null,{\"className\":\"border-b border-border/70 bg-background/70 backdrop-blur\",\"children\":[\"$\",\"div\",null,{\"className\":\"container-docs flex items-center justify-between gap-3 py-4\",\"children\":[[\"$\",\"div\",null,{\"children\":[[\"$\",\"$L4\",null,{\"href\":\"/\",\"className\":\"text-lg font-semibold text-foreground no-underline\",\"children\":\"Claustrum Docs\"}],[\"$\",\"p\",null,{\"className\":\"subtitle\",\"children\":\"GitHub Pages documentation for Claustrum\"}]]}],[\"$\",\"div\",null,{\"className\":\"flex items-center gap-2\",\"children\":[[\"$\",\"$L4\",null,{\"className\":\"button-link no-underline\",\"href\":\"/docs/home\",\"children\":\"English\"}],[\"$\",\"$L4\",null,{\"className\":\"button-link no-underline\",\"href\":\"/docs/ko/home\",\"children\":\"한국어\"}]]}]]}]}],[\"$\",\"$L5\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L7\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"main\",null,{\"className\":\"container-docs\",\"children\":[\"$\",\"section\",null,{\"className\":\"panel\",\"children\":[\"$\",\"div\",null,{\"className\":\"panel-body space-y-3\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"title\",\"children\":\"Page Not Found\"}],[\"$\",\"p\",null,{\"className\":\"subtitle\",\"children\":\"The document path does not exist.\"}],[\"$\",\"$L4\",null,{\"href\":\"/\",\"className\":\"button-link no-underline\",\"children\":\"Back to Docs Home\"}]]}]}]}],\"notFoundStyles\":[]}]]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L8\"],\"globalErrorComponent\":\"$9\",\"missingSlots\":\"$Wa\"}]\n"])</script><script>self.__next_f.push([1,"8:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Notion Integration | Claustrum Docs\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Documentation page: Notion Integration\"}]]\n3:null\n"])</script></body></html>