# ======================================
# Claustrum minimal environment template
# ======================================
# Copy and edit:
#   cp .env.example .env

# -------------------------------------------------------------------
# Required: Core runtime
# -------------------------------------------------------------------
# Use docker service name `postgres` when running with localdb profile.
# For external DB (RDS), use your endpoint and include SSL params when needed.
DATABASE_URL=postgres://<db_user>:<db_password>@postgres:5432/<db_name>

# Runtime API key used by MCP adapter and other API clients.
MEMORY_CORE_API_KEY=<runtime-api-key>

# Internal URL used by mcp-adapter (container-to-container).
MEMORY_CORE_URL=http://memory-core:8080

# Browser-facing URL used by Admin UI.
NEXT_PUBLIC_MEMORY_CORE_URL=http://localhost:8080

# -------------------------------------------------------------------
# Required: Local compose postgres init (localdb profile only)
# -------------------------------------------------------------------
POSTGRES_DB=<db_name>
POSTGRES_USER=<db_user>
POSTGRES_PASSWORD=<db_password>

# -------------------------------------------------------------------
# Optional: Common defaults
# -------------------------------------------------------------------
MEMORY_CORE_HOST=0.0.0.0
MEMORY_CORE_PORT=8080
MEMORY_CORE_LOG_LEVEL=error
MEMORY_CORE_WORKSPACE_KEY=personal
MCP_ADAPTER_LOG_LEVEL=error
ADMIN_UI_PORT=3000

# -------------------------------------------------------------------
# Optional: Bootstrap/admin
# -------------------------------------------------------------------
# If omitted, seed uses MEMORY_CORE_API_KEY.
MEMORY_CORE_SEED_ADMIN_KEY=

# If true and users table is empty, memory-core creates admin@example.com once.
MEMORY_CORE_ALLOW_BOOTSTRAP_ADMIN=true

# -------------------------------------------------------------------
# Optional: Security secrets
# -------------------------------------------------------------------
# Recommended: set one strong secret and let memory-core derive internal secrets.
# If empty, development defaults are used (not for production).
MEMORY_CORE_SECRET=<strong-shared-secret>

# Optional: individual overrides (only if you need separate values)
MEMORY_CORE_AUTH_SESSION_SECRET=
MEMORY_CORE_API_KEY_HASH_SECRET=
MEMORY_CORE_ONE_TIME_TOKEN_SECRET=
MEMORY_CORE_GITHUB_STATE_SECRET=
# Allow private/localhost audit sink endpoints (development only; default false)
MEMORY_CORE_ALLOW_PRIVATE_AUDIT_SINK_URLS=false

# -------------------------------------------------------------------
# Optional: GitHub App integration (workspace-level)
# -------------------------------------------------------------------
GITHUB_APP_ID=
GITHUB_APP_PRIVATE_KEY=
GITHUB_APP_WEBHOOK_SECRET=
GITHUB_APP_NAME=
GITHUB_APP_URL=

# -------------------------------------------------------------------
# Optional: Image overrides (image-based compose)
# -------------------------------------------------------------------
# Defaults:
# - ghcr.io/stephen-kim/claustrum-memory-core:latest
# - ghcr.io/stephen-kim/claustrum-mcp-adapter:latest
# - ghcr.io/stephen-kim/claustrum-admin-ui:latest
# MEMORY_CORE_IMAGE=ghcr.io/<org>/claustrum-memory-core:latest
# MCP_ADAPTER_IMAGE=ghcr.io/<org>/claustrum-mcp-adapter:latest
# ADMIN_UI_IMAGE=ghcr.io/<org>/claustrum-admin-ui:latest

# -------------------------------------------------------------------
# Optional: Integration lock policy
# -------------------------------------------------------------------
# all  => force ENV-only for all providers
# none => ignore ENV provider settings, use DB/Admin UI settings only
# Comma-separated provider list also supported:
# notion,jira,confluence,linear,slack,audit_reasoner
MEMORY_CORE_INTEGRATION_LOCKED_PROVIDERS=

# -------------------------------------------------------------------
# Optional: Provider/API fallback keys
# -------------------------------------------------------------------
# Most provider settings can be stored in Admin UI (DB) and do not need env values.
# Add only what you actually use; keep this file minimal by default.
# Examples:
# MEMORY_CORE_NOTION_TOKEN=
# MEMORY_CORE_JIRA_BASE_URL=
# MEMORY_CORE_JIRA_EMAIL=
# MEMORY_CORE_JIRA_API_TOKEN=
# MEMORY_CORE_CONFLUENCE_BASE_URL=
# MEMORY_CORE_CONFLUENCE_EMAIL=
# MEMORY_CORE_CONFLUENCE_API_TOKEN=
# MEMORY_CORE_LINEAR_API_KEY=
# MEMORY_CORE_AUDIT_SLACK_WEBHOOK_URL=
# OPENAI_API_KEY=
# ANTHROPIC_API_KEY=
# GEMINI_API_KEY=
