# OIDC 게이트

## Claustrum에서 OIDC의 역할

OIDC는 인증 레이어이자 작업 공간 액세스 확인입니다.

- OIDC는 신원을 검증합니다.
- OIDC는 작업 공간 수준 세션 신뢰를 설정합니다.
- OIDC는 프로젝트 인증의 기본 소스로서 GitHub를 대체하지 않습니다.

## 신원 키

Claustrum은 변경 불가능한 ID 튜플로 OIDC 사용자를 식별합니다.

```text
(issuer, subject)
```
이메일은 변경 가능하며 기본 ID 키로 사용되지 않습니다.

## 그룹 클레임 매핑

그룹 매핑은 정책 신호로 지원됩니다.

- 그룹 이름보다 안정적인 그룹 ID를 선호합니다.
- 그룹 표시 이름은 UI 전용 메타데이터입니다.
- 매핑은 정책에 따라 액세스 권한을 높일 수 있지만 GitHub는 프로젝트 액세스의 기본 소스로 남아 있습니다.

## 동기화 모드

| 모드 | 의미 |
|---|---|
| `add_only` | OIDC 매핑의 보조금이 추가됩니다. 기존의 관련 없는 보조금은 보존됩니다. |
| `add_and_remove` | 보호 규칙에 따라 부여는 현재 매핑 상태로 조정됩니다. |

## OIDC가 기본 승인이 아닌 이유

Claustrum은 GitHub를 프로젝트 권한으로 사용하여 저장소 소유권을 유지합니다.

- GitHub는 저장소 권한에 대한 운영 소스입니다.
- OIDC 그룹은 조직적이므로 코드 소유권을 정확하게 나타내지 않을 수 있습니다.
- OIDC는 안정적인 신원 확인 및 작업 공간 액세스 제어에 여전히 중요합니다.

## 기업의 의미

엔터프라이즈 배포에서 이 분할 모델은 다음을 제공합니다.

- OIDC를 통한 SSO 규정 준수 및 중앙 집중식 ID 수명 주기.
- GitHub 권한 그래프를 통한 정확한 저장소 인증.
- 감사 로그를 사용한 수동 액세스 재정의를 통해 예외를 제어합니다.

## 가드레일

- OIDC 게이트 오류로 인해 프로젝트 역할 평가 전에 액세스가 거부됩니다.
- ID 링크는 작업 영역별로 테넌트 범위로 지정됩니다.
- 그룹-클레임 형식 불일치는 구성 위험으로 처리되어야 합니다.
